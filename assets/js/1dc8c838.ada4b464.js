"use strict";(self.webpackChunke_school_saa_s_documentation=self.webpackChunke_school_saa_s_documentation||[]).push([[5113],{2869:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/supervisor-43be0f4a65c2a849524dd16ec280b84a.png"},28453:(e,n,i)=>{i.d(n,{R:()=>o,x:()=>t});var s=i(96540);const r={},l=s.createContext(r);function o(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(l.Provider,{value:n},e.children)}},50338:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>t,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"queue-setup","title":"\ud83d\udd04 Laravel Queue Implementation","description":"\ud83d\udccb Overview","source":"@site/installation/queue-setup.md","sourceDirName":".","slug":"/queue-setup","permalink":"/SkillArc-Documentation/installation/queue-setup","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"installationSidebar","previous":{"title":"\ud83d\udd0c How to Get Socket URL","permalink":"/SkillArc-Documentation/installation/get-socket-url"},"next":{"title":"\ud83c\udf10 How to Setup Custom Domain","permalink":"/SkillArc-Documentation/installation/setup-custom-domain"}}');var r=i(74848),l=i(28453);const o={sidebar_position:6},t="\ud83d\udd04 Laravel Queue Implementation",a={},c=[{value:"\ud83d\udccb Overview",id:"-overview",level:2},{value:"\u2699\ufe0f Key Operations",id:"\ufe0f-key-operations",level:3},{value:"\u2b50 Benefits",id:"-benefits",level:3},{value:"\ud83c\udfd7\ufe0f Architecture",id:"\ufe0f-architecture",level:2},{value:"\ud83d\udce6 Job Classes",id:"-job-classes",level:3},{value:"\ud83d\udd27 Setup Instructions",id:"-setup-instructions",level:2},{value:"\ud83c\udfaf Option 1: aapanel Control Panel (Recommended)",id:"-option-1-aapanel-control-panel-recommended",level:3},{value:"\ud83d\udcf1 Install Supervisor from App Store",id:"-install-supervisor-from-app-store",level:4},{value:"\u2699\ufe0f Configure Laravel Queue Worker",id:"\ufe0f-configure-laravel-queue-worker",level:4},{value:"\u2705 Benefits of aapanel Method",id:"-benefits-of-aapanel-method",level:4},{value:"\ud83d\udda5\ufe0f Option 2: Manual Installation (Traditional Method)",id:"\ufe0f-option-2-manual-installation-traditional-method",level:3},{value:"1\ufe0f\u20e3 Queue Configuration",id:"1\ufe0f\u20e3-queue-configuration",level:3},{value:"2\ufe0f\u20e3 Queue Worker Setup",id:"2\ufe0f\u20e3-queue-worker-setup",level:3},{value:"\ud83d\udcca School Status Codes",id:"-school-status-codes",level:2},{value:"\ud83d\ude80 Production Deployment",id:"-production-deployment",level:2},{value:"\ud83d\udd27 Supervisor Configuration",id:"-supervisor-configuration",level:3},{value:"1\ufe0f\u20e3 Install Required Packages",id:"1\ufe0f\u20e3-install-required-packages",level:3},{value:"2\ufe0f\u20e3 Create Configuration File",id:"2\ufe0f\u20e3-create-configuration-file",level:3},{value:"3\ufe0f\u20e3 Add Configuration",id:"3\ufe0f\u20e3-add-configuration",level:3},{value:"4\ufe0f\u20e3 Update Supervisor",id:"4\ufe0f\u20e3-update-supervisor",level:3},{value:"5\ufe0f\u20e3 Start WebSocket Service",id:"5\ufe0f\u20e3-start-websocket-service",level:3},{value:"6\ufe0f\u20e3 Check Status",id:"6\ufe0f\u20e3-check-status",level:3},{value:"\u26a1 Performance Benefits",id:"-performance-benefits",level:2},{value:"\ud83d\udd0d Troubleshooting Guide",id:"-troubleshooting-guide",level:2},{value:"\u274c Common Issues",id:"-common-issues",level:3},{value:"\ud83d\udd12 Security Guidelines",id:"-security-guidelines",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"-laravel-queue-implementation",children:"\ud83d\udd04 Laravel Queue Implementation"})}),"\n",(0,r.jsx)(n.h2,{id:"-overview",children:"\ud83d\udccb Overview"}),"\n",(0,r.jsx)(n.p,{children:"The school creation process in e-School SaaS involves several time-consuming operations that are now handled efficiently through Laravel's queue system, improving both user experience and system performance."}),"\n",(0,r.jsx)(n.h3,{id:"\ufe0f-key-operations",children:"\u2699\ufe0f Key Operations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ud83d\uddc4\ufe0f Creating a new database for each school"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udd04 Running database migrations"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udc65 Setting up default roles and permissions"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udcdd Inserting initial data and settings"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udce7 Sending welcome emails"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"-benefits",children:"\u2b50 Benefits"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u26a1 Immediate user interface response"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udeab No blocking operations"}),"\n",(0,r.jsx)(n.li,{children:"\u23f1\ufe0f Background processing (2-3 minutes)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"\ufe0f-architecture",children:"\ud83c\udfd7\ufe0f Architecture"}),"\n",(0,r.jsx)(n.h3,{id:"-job-classes",children:"\ud83d\udce6 Job Classes"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"SetupSchoolDatabase"})," (",(0,r.jsx)(n.code,{children:"app/Jobs/SetupSchoolDatabase.php"}),")"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ud83c\udfaf Manages database creation and migrations"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udcca Updates school status automatically"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udce8 Handles welcome email dispatch"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-setup-instructions",children:"\ud83d\udd27 Setup Instructions"}),"\n",(0,r.jsx)(n.h3,{id:"-option-1-aapanel-control-panel-recommended",children:"\ud83c\udfaf Option 1: aapanel Control Panel (Recommended)"}),"\n",(0,r.jsxs)(n.p,{children:["If you are using ",(0,r.jsx)(n.strong,{children:"aapanel control panel"}),", you can directly install supervisor from the app store and configure Laravel queue from there. This is our ",(0,r.jsx)(n.strong,{children:"recommended option"})," for aapanel users."]}),"\n",(0,r.jsx)(n.h4,{id:"-install-supervisor-from-app-store",children:"\ud83d\udcf1 Install Supervisor from App Store"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Open your aapanel control panel"}),"\n",(0,r.jsxs)(n.li,{children:["Navigate to the ",(0,r.jsx)(n.strong,{children:"App Store"})," section"]}),"\n",(0,r.jsxs)(n.li,{children:["Search for ",(0,r.jsx)(n.strong,{children:"Supervisor"})]}),"\n",(0,r.jsxs)(n.li,{children:["Click ",(0,r.jsx)(n.strong,{children:"Install"})," to add it to your system"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Install Supervisor from App Store",src:i(2869).A+"",width:"1897",height:"729"})}),"\n",(0,r.jsx)(n.h4,{id:"\ufe0f-configure-laravel-queue-worker",children:"\u2699\ufe0f Configure Laravel Queue Worker"}),"\n",(0,r.jsx)(n.p,{children:"After installing supervisor, configure your Laravel queue worker:"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Configure Laravel Queue Worker",src:i(76198).A+"",width:"1186",height:"616"})}),"\n",(0,r.jsx)(n.h4,{id:"-benefits-of-aapanel-method",children:"\u2705 Benefits of aapanel Method"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\ud83d\ude80 ",(0,r.jsx)(n.strong,{children:"Easy Installation"}),": One-click installation from app store"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83c\udf9b\ufe0f ",(0,r.jsx)(n.strong,{children:"User-Friendly Interface"}),": Graphical configuration options"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udd27 ",(0,r.jsx)(n.strong,{children:"Integrated Management"}),": Centralized control panel access"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udcca ",(0,r.jsx)(n.strong,{children:"Real-time Monitoring"}),": Built-in status monitoring"]}),"\n",(0,r.jsxs)(n.li,{children:["\ud83d\udee0\ufe0f ",(0,r.jsx)(n.strong,{children:"Simplified Configuration"}),": No manual command line setup required"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"\ufe0f-option-2-manual-installation-traditional-method",children:"\ud83d\udda5\ufe0f Option 2: Manual Installation (Traditional Method)"}),"\n",(0,r.jsx)(n.p,{children:"If you prefer manual installation or are not using aapanel, follow the traditional setup method below."}),"\n",(0,r.jsx)(n.h3,{id:"1\ufe0f\u20e3-queue-configuration",children:"1\ufe0f\u20e3 Queue Configuration"}),"\n",(0,r.jsxs)(n.p,{children:["Update ",(0,r.jsx)(n.code,{children:".env"})," file with queue driver:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-env",children:"QUEUE_CONNECTION=database\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2\ufe0f\u20e3-queue-worker-setup",children:"2\ufe0f\u20e3 Queue Worker Setup"}),"\n",(0,r.jsx)(n.p,{children:"Start processing jobs:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Process all queues\nphp artisan queue:work\n\n# For production (with supervisor)\n# See configuration below\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-school-status-codes",children:"\ud83d\udcca School Status Codes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"0\ufe0f\u20e3 Pending/Setup in progress"}),"\n",(0,r.jsx)(n.li,{children:"1\ufe0f\u20e3 Setup completed successfully"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-production-deployment",children:"\ud83d\ude80 Production Deployment"}),"\n",(0,r.jsx)(n.h3,{id:"-supervisor-configuration",children:"\ud83d\udd27 Supervisor Configuration"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note:"})," If Supervisor is already installed on your server, you can skip steps 1\ufe0f\u20e3 below and proceed directly to creating the configuration file."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"1\ufe0f\u20e3-install-required-packages",children:"1\ufe0f\u20e3 Install Required Packages"}),"\n",(0,r.jsx)(n.p,{children:"Open the Terminal from an SSH Connection:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt-get update\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo apt-get install supervisor\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2\ufe0f\u20e3-create-configuration-file",children:"2\ufe0f\u20e3 Create Configuration File"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo nano /etc/supervisor/conf.d/laravel-worker.conf\n"})}),"\n",(0,r.jsx)(n.h3,{id:"3\ufe0f\u20e3-add-configuration",children:"3\ufe0f\u20e3 Add Configuration"}),"\n",(0,r.jsx)(n.p,{children:"Add the following content to the configuration file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ini",children:"[program:laravel-worker]\nprocess_name=%(program_name)s_%(process_num)02d\ncommand=php /path/to/your/project/artisan queue:work\nautostart=true\nautorestart=true\nstopasgroup=true\nkillasgroup=true\nuser=www-data\nnumprocs=2\nredirect_stderr=true\nstdout_logfile=/path/to/your/project/storage/logs/worker.log\nstopwaitsecs=3600\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4\ufe0f\u20e3-update-supervisor",children:"4\ufe0f\u20e3 Update Supervisor"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo supervisorctl reread\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo supervisorctl update\n"})}),"\n",(0,r.jsx)(n.h3,{id:"5\ufe0f\u20e3-start-websocket-service",children:"5\ufe0f\u20e3 Start WebSocket Service"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo supervisorctl start laravel-worker\n"})}),"\n",(0,r.jsx)(n.h3,{id:"6\ufe0f\u20e3-check-status",children:"6\ufe0f\u20e3 Check Status"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"sudo supervisorctl status\n"})}),"\n",(0,r.jsx)(n.h2,{id:"-performance-benefits",children:"\u26a1 Performance Benefits"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\ud83c\udfaf ",(0,r.jsx)(n.strong,{children:"Enhanced User Experience"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Instant response to requests"}),"\n",(0,r.jsx)(n.li,{children:"No waiting time for users"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\ud83d\udcaa ",(0,r.jsx)(n.strong,{children:"System Efficiency"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Non-blocking operations"}),"\n",(0,r.jsx)(n.li,{children:"Better resource utilization"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\ud83d\udcc8 ",(0,r.jsx)(n.strong,{children:"Scalability"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Multiple concurrent processes"}),"\n",(0,r.jsx)(n.li,{children:"Efficient resource management"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\ud83d\udd04 ",(0,r.jsx)(n.strong,{children:"Reliability"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Automatic retry mechanism"}),"\n",(0,r.jsx)(n.li,{children:"Failed job handling"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-troubleshooting-guide",children:"\ud83d\udd0d Troubleshooting Guide"}),"\n",(0,r.jsx)(n.h3,{id:"-common-issues",children:"\u274c Common Issues"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\ud83d\udeab ",(0,r.jsx)(n.strong,{children:"Jobs Not Processing"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Verify queue workers are running"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Check queue driver configuration"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Inspect failed_jobs table"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\u26a0\ufe0f ",(0,r.jsx)(n.strong,{children:"School Setup Failures"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\ud83d\udcdd Review error logs"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udd11 Check database permissions"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udd04 Use retry commands for failed jobs"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\ud83d\udce7 ",(0,r.jsx)(n.strong,{children:"Email Issues"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2699\ufe0f Verify email configuration"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udd12 Check SMTP settings"}),"\n",(0,r.jsx)(n.li,{children:"\ud83d\udccb Review email logs"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"-security-guidelines",children:"\ud83d\udd12 Security Guidelines"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\ud83d\uddc4\ufe0f ",(0,r.jsx)(n.strong,{children:"Database Security"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Proper queue worker permissions"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Restricted database access"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\ud83d\udcc1 ",(0,r.jsx)(n.strong,{children:"File System"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Correct storage permissions"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Secure log directories"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["\ud83d\udd10 ",(0,r.jsx)(n.strong,{children:"Environment Security"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Protected configuration values"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Secure production settings"}),"\n"]}),"\n"]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},76198:(e,n,i)=>{i.d(n,{A:()=>s});const s=i.p+"assets/images/set_worker-5d514a6f6b1bfe91d9bf4087d7d81e1e.png"}}]);